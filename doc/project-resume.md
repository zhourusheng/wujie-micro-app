# 企业级微前端架构平台

## 项目简介

基于 wujie 微前端框架构建的企业级后台管理平台，通过完善的统一认证中心 + 状态共享机制，系统性解决了微前端架构中的关键技术难题：跨框架通信、状态同步、权限控制和性能优化。项目采用多技术栈并存模式（Vue3 + React18 + Vue2），既保障了技术迁移的平滑性，又为团队提供了技术选型自由度。打造了一个可扩展、易维护的企业级微前端平台，落地后支撑 3 个业务子系统接入，团队并行开发效率提升 40%，故障排查耗时降低 60%。

技术栈：wujie 微前端框架、Vue3/React18/Vue2 多技术栈、TypeScript、Vite 构建工具、Vue Router/React Router、Pinia、JWT 认证、Docker 容器化

## 主要工作

### 一、微前端架构设计

- **核心框架：** 基于 wujie 微前端框架实现多个子应用的低侵入接入，支持 Vue3/React18/Vue2 多技术栈并存，通过运行时 JavaScript 沙箱和 CSS 隔离机制，确保子应用间的 JS 全局变量、样式、DOM 互不污染。
- **状态管理：** 设计跨应用状态共享机制，主应用使用 Pinia 管理全局状态。利用 Wujie 提供的 props 数据注入和 window.$wujie 事件总线机制进行通信，并封装基于 TypeScript 的通信工具库，实现消息定义、传递与监听的类型安全。
- **路由设计：** 实现主子应用路由联动，主应用采用通配符路由捕获子应用路径，子应用支持独立运行和嵌套运行两种模式。路由解耦设计使得子应用可以独立开发、测试和部署，主应用只需更新子应用入口配置。
- **多技术栈通信：** 通过统一通信协议和适配层，实现 Vue 与 React 子应用间业务逻辑的无缝调用和状态同步，解决跨技术栈间的数据传递和事件同步难题。

### 二、认证体系与安全保障

- **SSO 单点登录：** 实现了完整的基于 JWT + 事件总线的微前端 SSO 方案，通过双重认证传递机制（主应用初始化时通过 props 注入令牌 + 运行时通过 Wujie 事件总线进行令牌刷新/失效通知）确保所有子应用认证状态的实时同步和容错处理。
- **RBAC 权限控制：** 构建细粒度 RBAC 权限体系，在主应用统一管理权限数据。通过认证守卫（Auth Guard）拦截路由导航，并结合向子应用注入的权限 props，实现菜单级、路由级、按钮级权限控制的向下传递和一致性验证。
- **环境适配策略：** 子应用支持微前端模式和独立运行模式，通过环境检测自动切换认证策略，实现开发、测试、生产环境的无缝切换。

### 三、性能优化与开发体验

- **预加载策略：** 实现子应用预加载机制，结合用户行为分析智能预加载潜在需要的子应用资源，减少首次加载时间，支持按需加载和缓存策略，提升用户体验。
- **构建优化：** 通过 Vite 配置优化（依赖预构建、高效插件）和精细化代码分割策略，实现子应用的独立构建和部署。相较于原单体构建方案，整体构建效率提升 45%。
- **开发工具：** 开发了专用的微前端调试工具，可视化展示 Wujie 子应用生命周期（加载/挂载/卸载）、事件通信流（发送方、接收方、事件名、载荷）和性能指标，支持沙箱环境下的断点调试，极大提升开发和问题排查效率。
- **异常处理与监控：** 建立全链路错误监控体系（集成Sentry），在主应用通过劫持全局错误事件和 Wujie 错误钩子收集异常。结合性能指标（加载时间、FCP、FMP），建立健康度评分模型，实现实时追踪、报警与根因分析。
